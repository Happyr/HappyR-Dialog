!function($){"use strict";$(function(){$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};var name;for(name in transEndEventNames){if(el.style[name]!==undefined){return transEndEventNames[name]}}}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);!function($){"use strict";var HappyrDialog=function(element,options){this.options=options;this.$element=$(element);this.$element.delegate('[data-dismiss="happyr-dialog"]',"click.dismiss.happyr-dialog",$.proxy(this.hide,this));this.$element.hide();happyrDialog_addWrapper(this.$element,options);if(this.options.remote){var $dialogBody=this.$element.find(".happyr-dialog-body");if(options.loaderImage!=undefined){$dialogBody.html('<img class="happyr-dialog-loader" src="'+options.loaderImage+'" />')}$dialogBody.load(this.options.remote,function(){if(options.submitFormOnConfirm){var $form=$("form",$(this));if($form.length>0){$(document).on("happyr-dialog-confirm",function(e){console.log("Submit the form");if(options.getFormResultInDialog){$.ajax({type:$form.attr("method"),url:$form.attr("action"),data:$form.serialize(),success:function(data){$dialogBody.html(data)}})}else if(options.hideAfterFormSubmit){$form.submit();$("#happyr-dialog").happyrDialog("hide")}})}}})}};HappyrDialog.prototype={constructor:HappyrDialog,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var that=this;var e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return}this.isShown=true;this.escape();this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("happyr-dialog-animation");if(!that.$element.parent().length){that.$element.appendTo(document.body)}that.$element.show();if(transition){that.$element[0].offsetWidth}that.$element.addClass("happyr-dialog-in").attr("aria-hidden",false);that.enforceFocus();var triggerShowEvents=function(){that.$element.focus().trigger("shown");$(document).trigger("happyr-dialog-shown")};transition?that.$element.one($.support.transition.end,triggerShowEvents):triggerShowEvents()})},hide:function(e){e&&e.preventDefault();var that=this;e=$.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off("focusin.happyr-dialog");this.$element.removeClass("happyr-dialog-in").attr("aria-hidden",true);$.support.transition&&this.$element.hasClass("happyr-dialog-animation")?this.hideWithTransition():this.hideDialog()},enforceFocus:function(){var that=this;$(document).on("focusin.happyr-dialog",function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length){that.$element.focus()}})},escape:function(){var that=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.happyr-dialog",function(e){e.which==27&&that.hide()})}else if(!this.isShown){this.$element.off("keyup.dismiss.happyr-dialog")}},hideWithTransition:function(){var that=this;var timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideDialog()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideDialog()})},hideDialog:function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(callback){var that=this;var animate=this.$element.hasClass("happyr-dialog-animation")?"happyr-dialog-animation":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="happyr-dialog-backdrop '+animate+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this));if(doAnimate){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("happyr-dialog-in");if(!callback){return}if(doAnimate){this.$backdrop.one($.support.transition.end,callback)}else{callback()}}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("happyr-dialog-in");if($.support.transition&&this.$element.hasClass("happyr-dialog-animation")){this.$backdrop.one($.support.transition.end,callback)}else{callback()}}else if(callback){callback()}}};var old=$.fn.happyrDialog;$.fn.happyrDialog=function(option){return this.each(function(){var $this=$(this);var data=$this.data("happyrDialog");var options=$.extend({},$.fn.happyrDialog.defaults,$this.data(),typeof option=="object"&&option);if(!data||!data.isShown){$this.data("happyrDialog",data=new HappyrDialog(this,options))}if(typeof option=="string"){data[option]()}else if(option.action!=undefined){data[option.action]()}else if(options.show){data.show()}})};$.fn.happyrDialog.defaults={backdrop:true,keyboard:true,show:true,showHeader:true,showFooter:true,showCloseButton:"Close",showConfirmButton:"Confirm",showHeaderCloseButton:true,showHeaderTitle:true,submitFormOnConfirm:true,getFormResultInDialog:true,hideAfterFormSubmit:false};$.fn.happyrDialog.Constructor=HappyrDialog;$.fn.happyrDialog.noConflict=function(){$.fn.happyrDialog=old;return this};$(document).on("click.happyr-dialog.data-api",'[data-toggle="happyr-dialog"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&!href.match(/[?=]/)&&href.replace(/.*(?=#[^\s]+$)/,""));var elementSettings=happyrDialog_convertStringToObject($this.attr("data-happyr-dialog-settings"));elementSettings=$.extend({remote:!/#/.test(href)&&href,action:"toggle"},$target.data(),$this.data(),elementSettings);e.preventDefault();if($target.length==0){$target=$("#happyr-dialog");if($target.length==0){$target=$('<div id="happyr-dialog" style="display:none" tabindex="-1" role="dialog" aria-hidden="true" />').appendTo(document.body)}}$target.happyrDialog(elementSettings).one("hide",function(){$this.focus()})});function happyrDialog_convertStringToObject(string){return JSON.parse(JSON.stringify(eval("("+string+")")))}function happyrDialog_addWrapper($element,options){var body;if($(".happyr-dialog-body",$element).length>0){body=$element.find(".happyr-dialog-body").html()}else{body=$element.html()}$element.html("");$element.addClass("happyr-dialog");if(options.animation){$element.addClass("happyr-dialog-animation")}if(options.showHeader){happyrDialog_addHeader($element,options)}var $bodyWrapper=$("<div></div>").addClass("happyr-dialog-body").append(body);$element.append($bodyWrapper);if(options.showFooter){happyrDialog_addFooter($element,options)}}function happyrDialog_addHeader($element,options){var $header=$("<div></div>").addClass("happyr-dialog-header");if(options.showHeaderTitle&&options.title!=undefined){var $title=$("<h3>"+options.title+"</h3>");$header.append($title)}if(options.showConfirmButton){var $closeButton=$("<button type='button' class='close' data-dismiss='happyr-dialog' aria-hidden='true'>x</button>");$header.append($closeButton)}$header.append($("<div></div>").addClass("happyr-dialog-clearfix"));$element.append($header)}function happyrDialog_addFooter($element,options){var $footer=$("<div></div>").addClass("happyr-dialog-footer");if(options.showCloseButton){var $closeButton=$("<button class='btn' data-dismiss='happyr-dialog' aria-hidden='true'>"+options.showCloseButton+"</button>");$footer.append($closeButton)}if(options.showConfirmButton){var $confirmButton=$("<button class='btn btn-primary'>"+options.showConfirmButton+"</button>");$confirmButton.click(function(e){$(document).trigger("happyr-dialog-confirm")});$footer.append($confirmButton)}$element.append($footer)}}(window.jQuery);