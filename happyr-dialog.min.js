/* =========================================================
 * HappyR Dialog is based on bootstrap modal by Twitter Inc.
 *
 * Documentation and examples is found at http://developer.happyr.se
 *
 * =========================================================
 * The MIT License (MIT)
 *
 * Copyright (c) 2013 <HappyRecruiting, Twitter Inc>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 * documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of
 * the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO
 *  THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 *  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *  SOFTWARE.
 *
 * ========================================================= */
!function($){"use strict";function happyrDialog_convertStringToObject(string){return void 0===string||""===string?{}:JSON.parse(JSON.stringify(eval("("+string+")")))}function happyrDialog_addWrapper(t,i){var a;a=$(".happyr-dialog-body",t).length>0?t.find(".happyr-dialog-body").html():t.html(),t.html(""),t.addClass("happyr-dialog"),i.showHeader&&happyrDialog_addHeader(t,i);var o=$("<div></div>").addClass("happyr-dialog-body").append(a);t.append(o),i.showFooter&&happyrDialog_addFooter(t,i)}function happyrDialog_addHeader(t,i){var a=$("<div></div>").addClass("happyr-dialog-header");if(i.showHeaderTitle&&void 0!==i.texts.title){var o=$("<h3>"+i.texts.title+"</h3>");a.append(o)}if(i.showConfirmButton){var e=$("<button type='button' class='close' data-dismiss='happyr-dialog' aria-hidden='true'>x</button>");a.append(e)}a.append($("<div></div>").addClass("happyr-dialog-clearfix")),t.append(a)}function happyrDialog_addFooter(t,i){var a=$("<div></div>").addClass("happyr-dialog-footer");if(i.showCloseButton){var o=$("<button class='btn' data-dismiss='happyr-dialog' aria-hidden='true'>"+i.texts.close+"</button>");a.append(o)}if(i.showConfirmButton){var e=$("<button class='btn btn-primary'>"+i.texts.confirm+"</button>");e.click(function(){$(document).trigger("happyr-dialog-confirm")}),a.append(e)}t.append(a)}var HappyrDialog=function(t,i){if(this.options=i,this.$element=$(t),this.$element.delegate('[data-dismiss="happyr-dialog"]',"click.dismiss.happyr-dialog",$.proxy(this.hide,this)),this.$element.hide(),happyrDialog_addWrapper(this.$element,i),this.options.remote){var a=this.$element.find(".happyr-dialog-body");void 0!==i.loaderImage&&a.html('<img class="happyr-dialog-loader" src="'+i.loaderImage+'" />'),a.load(this.options.remote,function(){if(i.submitFormOnConfirm){var t=$("form",$(this));t.length>0&&$(document).on("happyr-dialog-confirm",function(){i.getFormResultInDialog?$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),success:function(t){a.html(t)}}):i.hideAfterFormSubmit&&(t.submit(),$("#happyr-dialog").happyrDialog("hide"))})}})}};HappyrDialog.prototype={constructor:HappyrDialog,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=$.Event("show");if(this.$element.trigger(i),!this.isShown&&!i.isDefaultPrevented()){this.isShown=!0,this._enableEscape(),t.$element.parent().length||t.$element.appendTo(document.body);var a=function(){t.$element.focus().trigger("shown"),$(document).trigger("happyr-dialog-shown")},o=function(){t.$element.show(),t.$element.attr("aria-hidden",!1),t.enforceFocus()};this._showBackdrop(),t.options.animate?(t.$element.css("opacity",0).css("top","-25%"),o(),t.$element.animate({top:"10%",opacity:"1"},t.options.animation.timeDialogShow,"swing",a)):(o(),a())}},hide:function(t){t&&t.preventDefault();var i=this;if(t=$.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()){this.isShown=!1,this._enableEscape(),$(document).off("focusin.happyr-dialog");var a=function(){i.$element.attr("aria-hidden",!0),i.$element.hide(),i.$element.trigger("hidden")};this._hideBackdrop(),i.options.animate?i.$element.animate({top:"-25%",opacity:"0"},i.options.animation.timeDialogHide,"swing",a):a()}},enforceFocus:function(){var t=this;$(document).on("focusin.happyr-dialog",function(i){t.$element[0]===i.target||t.$element.has(i.target).length||t.$element.focus()})},_enableEscape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.happyr-dialog",function(i){27==i.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.happyr-dialog")},_showBackdrop:function(){var t=this;this.options.backdrop&&(this.$backdrop=$('<div class="happyr-dialog-backdrop" style="display:none" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),this.options.animate?(this.$backdrop.css("opacity",0),this.$backdrop.show(),this.$backdrop.fadeTo(t.options.animation.timeBackdropShow,t.options.animation.opacityBackdrop)):this.$backdrop.show())},_hideBackdrop:function(){if(this.$backdrop){var t=this,i=function(){t.$backdrop&&t.$backdrop.remove(),t.$backdrop=null};this.options.animate?this.$backdrop.fadeTo(t.options.animation.timeDialogHide,0,i):i()}}};var old=$.fn.happyrDialog;$.fn.happyrDialog=function(t){return this.each(function(){var i=$(this),a=i.data("happyrDialog"),o=$.extend(!0,$.fn.happyrDialog.defaults,i.data(),"object"==typeof t&&t);a&&a.isShown||i.data("happyrDialog",a=new HappyrDialog(this,o)),"string"==typeof t?a[t]():void 0!==t.action?a[t.action]():o.show&&a.show()})},$.fn.happyrDialog.defaults={animate:!0,animation:{timeBackdropShow:200,timeBackdropHide:200,timeDialogShow:300,timeDialogHide:300,opacityBackdrop:.8},backdrop:!0,keyboard:!0,show:!0,showHeader:!0,showFooter:!0,showCloseButton:!0,showConfirmButton:!0,showHeaderCloseButton:!0,showHeaderTitle:!0,submitFormOnConfirm:!0,texts:{close:"Close",confirm:"Confirm"},getFormResultInDialog:!0,hideAfterFormSubmit:!1},$.fn.happyrDialog.Constructor=HappyrDialog,$.fn.happyrDialog.noConflict=function(){return $.fn.happyrDialog=old,this},$(document).on("click.happyr-dialog.data-api",'[data-toggle="happyr-dialog"]',function(t){var i=$(this),a=i.attr("href"),o=$(i.attr("data-target")||a&&!a.match(/[?=\/&]/)&&a.replace(/.*(?=#[^\s]+$)/,"")),e=happyrDialog_convertStringToObject(i.attr("data-happyr-dialog-settings"));i.attr("data-happyr-dialog-title")&&(e.texts=$.extend(!0,e.texts,{title:i.attr("data-happyr-dialog-title")})),e=$.extend(!0,{remote:!/#/.test(a)&&a,action:"toggle"},o.data(),i.data(),e),t.preventDefault(),0===o.length&&(o=$("#happyr-dialog"),0===o.length&&(o=$('<div id="happyr-dialog" style="display:none" tabindex="-1" role="dialog" aria-hidden="true" />').appendTo(document.body))),o.happyrDialog(e).one("hide",function(){i.focus()})})}(window.jQuery);